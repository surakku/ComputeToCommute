import { MapContainer, TileLayer, Polyline, Popup } from 'react-leaflet'
import 'leaflet/dist/leaflet.css'
import polyline from '@mapbox/polyline'

import HeatChart from './HeatChart'


type PipeSegment = {
  id: number
  encodedPolyline: string
  wasteScore: number
}



function App() {
  
  // 1. Map Center (Champaign/Urbana area)
  const center: [number, number] = [40.1106, -88.2073]

  // 2. Mock ML Output â€” now using encoded polylines
  const pipeData: PipeSegment[] = [
    {
      id: 1,
      encodedPolyline: 'utxsFjvnyO?Pz@t@T?T?D?T@z@@fA?R?DATRp@p@bAdA`@?`@?V?H?`@?`@?L??[|@lBN?x@@v@?n@z@?tA?RPAd@v@FJTb@PVF@H??P@J@n@r@D@V@n@?HP??rB@hCN?@tCEF?l@?|A@p@D@D??F?F?V?DBtD?J?dA?P?j@ET?VD\\@d@AtANV\\p@Mp@AHCHCB@xA?^?L?bB?F?B@@?B@DBT@H?F@F?F?LAHA??X@??D@dG?tC@lCTApC?dDAnBA|A?jBAb@?v@?b@?fAAd@?`@?H?BTX?D@?WF?h@?~@?b@?hA?zBAb@?pAApA?d@?`@?TA',
      wasteScore: 0.92
    },
    {
      id: 1,
      encodedPolyline: 'eexsFjanyO?zA?x@hBAJ?HAF?hAAL?R?R?xA?RAb@?v@?J?@D`@t@?fA?bA?D?x@@x@LRX^NPFJX\\PTl@t@?FA@?@A?A?Xd@FH@@@?@?@@B?rAApB??QfA?fA?T?A`AjCC?`A?z@@vD?f@@l@?J?b@@|A?|A?D@f@?J?b@@h@?F@F?P?tB@L?H@J@DBJBFBHDFDDBDBBLFLB@?B@BBDDJJNl@JDHDJBF@B?B?FAJC\\ODAV?|@CD?B?@@@@@@?@?@@@?@?@?@?D?R@P@zBD?@?R?ELT?D??^@fE?l@@lC?T@rCJBrBVF@B@@?@?@?@@@?B@@@B@@@DDDBBDDHBFj@KRRRLZLF?D@H@J@H?HAJA@AXvA@DBV@N?@@\\@\\@j@?d@`@?J?B?C`@?N?^?P?R?N?h@?j@?j@?j@?j@?l@?j@?h@?j@?j@?n@?PpA?d@?`@?TA',
      wasteScore: 0.92
    },
    {
      id: 1,
      encodedPolyline: '}vqsFjtsyOA?a@?S@CACACEAC?E?s@@EAqC?K?OW?O@aDA@E@{@F_A@[D_A@_@Dy@@]Bu@WCYCcAGsAMoD[QAwHq@c@EyAMSA_AIiBOQCoJy@SEaDWMAiAKu@GQC]C_AKK??HW?E??IKAq@EeAG[AiAI[CQA]MIAsBQ_BOoAMc@EcBOSAcDYOCa@CmAKQASCUCC?QCs@GQC_@DOCcAISAYE]Ms@GiAKQAsAKy@ImAKq@G[CBm@[Cc@Ec@EUCg@E]CWI_@EuAO?u@?K?i@?mB?uBA]?{@?K?yA?eE{@?',
      wasteScore: 0.99
    },
    {
      id: 1,
      encodedPolyline: 'eexsFjanyO?zA?x@hBAJ?HAF?hAAL?R?R?xA?RAb@?v@?J?@D`@t@?fA?bA?D?x@@x@LRX^NPFJX\\PTl@t@?FA@?@A?A?Xd@FH@@@?@?@@B?rAApB??QfA?fA?T?A`AjCC?`A?z@@vD?f@@l@?J?b@@|A?|A?D@f@?J?b@@h@?F@F?P?tB@L?H@J@DBJBFBHDFDDBDBBLFLB@?B@BBDDJJNl@JDHDJBF@B?B?FAJC\\ODAV?|@CD?B?@@@@@@?@?@@@?@?@?@?D?R@P@zBD?@?R?ELT?D??^@fE?l@@lC?T@rCJBrBVF@B@@?@?@?@@@?B@@@B@@@DDDBBDDHBFj@KRRRLZLF?D@H@J@H?HAJA@AXvA@DBV@N?@@\\@\\@j@?d@`@?J?B?C`@?N?^?P?R?N?h@?j@?j@?j@?j@?l@?j@?h@?j@?j@?n@?PpA?d@?`@?TA',
      wasteScore: 0.99
    },
    {
      id: 1,
      encodedPolyline: 'szysF`xjyOR?@~Db@AAr@`@A`@?VAJ?b@?HAl@?t@Ax@AV?@\\H?P?B?B`CBlB?XB?@\\fA?N?b@AVAvACtAC@r@A`@?J@FAn@?tB@bA?\\@|D@hCBjCBpG?lB?p@BlC@jC?@?zA@bB?dB?b@?T@v@V?jA|@?Pf@?|@A?h@N?FAdA?P?D?|@tAAH?@@??@BB?@D?@?HNV^AB?@?@A@?@?@?@?@?@?@?@?@@@?@?@@@?@@@?@@??@@??@@??@@?@@@?@?@@D?D?b@??^^vAt@?@?@??@?@?RF?`@A?D?@@@xAx@?L@bD?x@?rA@~C?`A?fB?h@?R?`Br@A@^A^?H@DBFDH@@?B@FBL@H@TBT@LDLDP?BFJHLHHP?^?b@?D?L?F?fA?L??\\@l@?b@|@lBN?x@@v@?n@z@?tA?RPAd@v@FJTb@PVF@H??P@J@n@r@D@V@n@?HP??rB@hCN?@tCEF?l@?|A@p@D@D??F?F?V?DBtD?J?dA?P?j@ET?VD\\@d@AtANV\\p@Mp@AHCHCB@xA?^?L?bB?F?B@@?B@DBT@H?F@F?F?LAHA??X@??D@dG?tC@lCTApC?dDAnBA|A?jBAb@?v@?b@?fAAd@?`@?H?BTX?D@?WF?h@?~@?b@?hA?zBAb@?pAApA?d@?`@?TA',
      wasteScore: 0.99
    },
    {
      id: 1,
      encodedPolyline: 'am_tFblryOF@H?^KPMNg@Pi@J]f@Vh@D^CLGDEFIBCHKDAFCHALDf@Zj@\\v@f@HU^kAHUFOf@^VP\\XHSZm@JQHKRKJKb@_@\\WHETGDCFANERMf@Ej@A^At@AV?bB?^?RAXAdC?Z?BEN@CHZ@RC`A?fAAd@AF?ZA`@A@?D?`@AbCGV?`E@^?z@@^?N?PDx@?`@?P?JAJ?VDXIB@D@vA?P?vBAN?bA?hDAN?rAATChAAR@R??KL@P?F??F~@?`A?R@`AARBbBAbBAP@`AAV?pA?J?P?Z?FAX?T?V?Z?J?L?n@?d@?XAl@@T?pA?L?xAAR@dBAV?v@?H?\\@?GB?RA?Rb@@zAAT?zC?L?L[BG@@LJDBCFABzAC\\ANFF?XI`B?FAbAB?GB?P?B??FdAAT?pAAXDdA@N?F?D?n@?XKt@?P@f@AT?L?`@Ap@?H?TAnA??C\\A?D^?\\?V?T?p@AX?L?D?\\?Z?lBAT?x@??IVA?J|@AX?~@?~@AX?h@?\\AlA@|@?b@?bCCh@ATAl@?X?LATA|@@Z?x@BD?~@@V@R@v@BL@bAHB?nALB@\\DXB~@NL@XD@@j@FAG?a@?O?S?O?iA?e@?UAgA?uCpC?dDAnBA|A?jBAb@?v@?b@?fAAd@?`@?H?BTX?D@?WF?h@?~@?b@?hA?zBAb@?pAApA?d@?`@?TA',
      wasteScore: 0.99
    }
  ]

return (
  <div className="page-container">
    <h1 className="page-title">Compute To Commute</h1>
<p>...</p>
    <section className="top-container">
      </section>

      
    <div className="map-wrapper">
      <MapContainer
        center={center}
        zoom={14}
        className="map"
      >
        <TileLayer
          attribution="&copy; OpenStreetMap contributors"
          url="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"
        />

        {pipeData.map((pipe) => {
          const color = pipe.wasteScore > 0.8 ? 'red' : 'green'
          const decoded: [number, number][] = polyline.decode(pipe.encodedPolyline)

          return (
            <Polyline
              key={pipe.id}
              positions={decoded}
              color={color}
              weight={5}
            >
              <Popup>
                <strong>Pipe ID:</strong> {pipe.id} <br />
                <strong>Waste Score:</strong> {pipe.wasteScore}
              </Popup>
            </Polyline>
          )
        })}


      </MapContainer>
    </div>
    
        <section className="bottom-container">
          <div className="left">
          <div className="bottom-con">
            <h2>S</h2>
          </div>
          <div className="bottom-con">
          </div>
          <div className="bottom-con">
          </div>
          <div className="bottom-con">
          </div> 
          </div>
          <div className="right">
          <div className="bottom-con">
            <HeatChart></HeatChart>
          </div>
          </div> 
        </section>
<footer></footer>

    
  </div>
)
}

export default App